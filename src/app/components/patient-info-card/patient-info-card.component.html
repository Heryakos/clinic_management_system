<div class="patient-info-card" [ngClass]="className" *ngIf="patient">
    <!-- Header Section -->
    <div class="card-header">
        <div class="patient-photo-section">
            <img *ngIf="patient.Photo; else photoPlaceholder" [src]="'data:image/jpeg;base64,' + patient.Photo"
                alt="Patient Photo" class="patient-photo" />
            <ng-template #photoPlaceholder>
                <div class="patient-photo-placeholder">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </div>
            </ng-template>
        </div>
        <div class="patient-header-info">
            <h2 class="patient-name">{{ patient.FullName || getFullName() }}</h2>
            <div class="patient-ids">
                <span class="card-number">Card #: {{ patient.CardNumber }}</span>
                <span class="patient-id">Patient ID: {{ patient.PatientID }}</span>
                <!-- <span class="employee-id" *ngIf="patient?.EmployeeID">Employee ID: {{ patient?.EmployeeID }}</span> -->
            </div>
            <div class="request-info" *ngIf="patient?.RequestNumber">
                <span class="request-number">Request: {{ patient.RequestNumber }}</span>
                <span class="request-type" [ngClass]="getRequestTypeClass()">
                    {{ patient.RequestType?.replace('_', ' ') }}
                </span>
            </div>
        </div>
        <div class="patient-status">
            <div class="status-badge" [ngClass]="patient.IsActive ? 'active' : 'inactive'">
                {{ patient.IsActive ? 'Active' : 'Inactive' }}
            </div>
            <div class="approval-badge" [ngClass]="patient.SupervisorApproval ? 'approved' : 'pending'"
                *ngIf="patient?.SupervisorApproval !== undefined">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="m22 2-5 10-3-3"></path>
                </svg>
                {{ patient.SupervisorApproval ? 'Approved' : 'Pending' }}
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="card-content">
        <!-- Personal Information -->
        <div class="info-section">
            <h3 class="section-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                Personal Information
            </h3>
            <div class="info-grid">
                <div class="info-group">
                    <label>Full Name:</label>
                    <span>{{ patient.FullName }}</span>
                </div>
                <div class="info-group">
                    <label>Father's Name:</label>
                    <span>{{ patient.FatherName || 'N/A' }}</span>
                </div>
                <div class="info-group">
                    <label>Date of Birth:</label>
                    <span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        {{ formatDate(patient.DateOfBirth) }}
                    </span>
                </div>
                <div class="info-group">
                    <label>Age:</label>
                    <span>{{ patient.Age }} years</span>
                </div>
                <div class="info-group">
                    <label>Gender:</label>
                    <span>{{ patient.Gender }}</span>
                </div>
                <div class="info-group">
                    <label>Blood Type:</label>
                    <span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7Z">
                            </path>
                        </svg>
                        {{ patient.BloodType || 'Not specified' }}
                    </span>
                </div>
            </div>
        </div>

        <!-- Contact Information -->
        <div class="info-section">
            <h3 class="section-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                    </path>
                </svg>
                Contact Information
            </h3>
            <div class="info-grid">
                <div class="info-group">
                    <label>Phone:</label>
                    <span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                            </path>
                        </svg>
                        {{ patient.phone || 'N/A' }}
                    </span>
                </div>
            </div>
        </div>

        <!-- Address Information -->
        <div class="info-section">
            <h3 class="section-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                </svg>
                Address Information
            </h3>
            <div class="info-grid">
                <div class="info-group full-width">
                    <label>Address:</label>
                    <span>{{ patient.Address || 'N/A' }}</span>
                </div>
            </div>
        </div>

        <!-- Medical Information -->
        <div class="info-section">
            <h3 class="section-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10,9 9,9 8,9"></polyline>
                </svg>
                Medical Information
            </h3>
            <div class="info-grid">
                <div class="info-group full-width">
                    <label>Last Diagnosis:</label>
                    <span>{{ patient.LastDiagnosis || 'No previous diagnosis' }}</span>
                </div>
            </div>
        </div>

        <!-- Visit Information -->
        <div class="info-section">
            <h3 class="section-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12,6 12,12 16,14"></polyline>
                </svg>
                Visit Information
            </h3>
            <div class="info-grid">
                <div class="info-group">
                    <label>Total Visits:</label>
                    <span>{{ patient.TotalVisits || 'N/A' }}</span>
                </div>
                <div class="info-group">
                    <label>Last Visit:</label>
                    <span>{{ formatDateTime(patient.LastVisitDate) }}</span>
                </div>
                <div class="info-group">
                    <label>Registration Date:</label>
                    <span>{{ formatDateTime(patient.RegistrationDate) }}</span>
                </div>
            </div>
        </div>
    </div>
</div>